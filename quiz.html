<!DOCTYPE html>
<html lang="bn">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>‡¶ì‡ßü‡ßá‡¶¨ ‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡ßÅ‡¶á‡¶ú</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tiro+Bangla:wght@400&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Tiro Bangla', serif;
      }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.1.0",
    "react-dom/": "https://esm.sh/react-dom@^19.1.0/",
    "react/": "https://esm.sh/react@^19.1.0/",
    "@emailjs/browser": "https://esm.sh/@emailjs/browser@^4.4.1"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
  <body>
    <div id="root"></div>
    <!-- Netlify hidden form for notifications -->
    <form name="quiz-notifications" netlify netlify-honeypot="bot-field" hidden>
      <input type="hidden" name="form-name" value="quiz-notifications" />
      <p class="hidden">
        <label>Don‚Äôt fill this out if you‚Äôre human: <input name="bot-field" /></label>
      </p>
      <input type="text" name="type" />
      <input type="text" name="name" />
      <input type="text" name="studentClass" />
      <input type="text" name="roll" />
      <input type="text" name="score" />
      <input type="text" name="total" />
      <input type="text" name="sessionId" />
      <input type="text" name="timestamp" />
    </form>
    
    <script type="module">
      // --- CONSTANTS ---
      const CORRECT_PIN = "1234";
      const TIME_LIMIT = 10;
      const TOTAL_QUESTIONS_TO_SELECT = 20;

      const ALL_QUESTIONS = [
          { question: "HTML ‡¶è‡¶∞ ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶∞‡ßÇ‡¶™ ‡¶ï‡ßÄ?", options: ["HyperText Markup Language", "Hyperlink and Text Markup Language", "High-level Text Machine Language", "Home Tool Markup Language", "‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø"], answer: "HyperText Markup Language" },
          { question: "‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶™‡ßá‡¶ú‡ßá‡¶∞ ‡¶ï‡¶æ‡¶†‡¶æ‡¶Æ‡ßã ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶ï‡ßã‡¶®‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶Ø‡¶º?", options: ["CSS", "JavaScript", "HTML", "Python", "‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø"], answer: "HTML" },
          { question: "‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶ó‡ßç‡¶∞‡¶æ‡¶´ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶ï‡ßã‡¶®‡¶ü‡¶ø?", options: ["<p>", "<h>", "<a>", "<div>", "<span>"], answer: "<p>" },
          { question: "‡¶õ‡¶¨‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶® ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶Ø‡¶º?", options: ["<image>", "<img>", "<pic>", "<photo>", "<picture>"], answer: "<img>" },
          { question: "‡¶Ö‡¶®‡ßç‡¶Ø ‡¶™‡ßá‡¶ú‡ßá ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ü‡ßç‡¶∞‡¶ø‡¶¨‡¶ø‡¶â‡¶ü ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶Ø‡¶º?", options: ["src", "href", "link", "url", "target"], answer: "href" },
          { question: "‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶™‡ßá‡¶ú‡¶ï‡ßá ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶®‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶Ø‡¶º?", options: ["HTML", "JavaScript", "CSS", "Python", "SQL"], answer: "CSS" },
          { question: "‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶™‡ßá‡¶ú‡¶ï‡ßá ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡ßá‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶®‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶Ø‡¶º?", options: ["HTML", "CSS", "JavaScript", "PHP", "Ruby"], answer: "JavaScript" },
          { question: "‡¶∏‡¶¨‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶¨‡¶°‡¶º ‡¶π‡ßá‡¶°‡¶ø‡¶Ç ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶ï‡ßã‡¶®‡¶ü‡¶ø?", options: ["<h1>", "<h6>", "<head>", "<heading>", "<title>"], answer: "<h1>" },
          { question: "‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ü‡¶®‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡¶° ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶ï‡ßã‡¶® ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶Ø‡¶º?", options: ["<ol>", "<li>", "<ul>", "<list>", "<dl>"], answer: "<ul>" },
          { question: "‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞‡¶° ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶ï‡ßã‡¶® ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶Ø‡¶º?", options: ["<ul>", "<li>", "<ol>", "<list>", "<dt>"], answer: "<ol>" },
          { question: "‡¶ì‡¶Ø‡¶º‡ßá‡¶¨ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ï‡ßÄ?", options: ["‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡¶™‡¶æ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ", "‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡ßã‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡¶ø‡¶Ç ‡¶≠‡¶æ‡¶∑‡¶æ", "‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶∏‡¶´‡¶ü‡¶ì‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶∞", "‡¶è‡¶ï‡¶ü‡¶ø ‡¶π‡¶æ‡¶∞‡ßç‡¶°‡¶ì‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏", "‡¶è‡¶ï‡¶ü‡¶ø ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶∏"], answer: "‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶∏‡¶´‡¶ü‡¶ì‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶∞" },
          { question: "‡¶ï‡¶Æ‡ßç‡¶™‡¶ø‡¶â‡¶ü‡¶æ‡¶∞‡ßá‡¶∞ '‡¶Æ‡¶∏‡ßç‡¶§‡¶ø‡¶∑‡ßç‡¶ï' ‡¶ï‡ßã‡¶®‡¶ü‡¶ø?", options: ["RAM", "CPU", "Hard Disk", "Monitor", "GPU"], answer: "CPU" },
          { question: "‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤‡ßá ‡¶ï‡ßã‡¶° ‡¶≤‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡ßá‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá?", options: ["Microsoft Word", "TrebEdit", "VLC Player", "Adobe Reader", "Calculator"], answer: "TrebEdit" },
          { question: "‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶è‡¶ï‡ßç‡¶∏‡¶ü‡ßá‡¶®‡¶∂‡¶® ‡¶ï‡ßÄ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂ ‡¶ï‡¶∞‡ßá?", options: ["‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶Ü‡¶ï‡¶æ‡¶∞", "‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ", "‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶ß‡¶∞‡¶£", "‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ", "‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï"], answer: "‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶ß‡¶∞‡¶£" },
          { question: "‡¶è‡¶ï‡¶ü‡¶ø `.pdf` ‡¶´‡¶æ‡¶á‡¶≤ ‡¶ñ‡ßã‡¶≤‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶® ‡¶ß‡¶∞‡¶®‡ßá‡¶∞ ‡¶∏‡¶´‡¶ü‡¶ì‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®?", options: ["‡¶ì‡¶Ø‡¶º‡ßá‡¶¨ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞", "‡¶Æ‡¶ø‡¶°‡¶ø‡¶Ø‡¶º‡¶æ ‡¶™‡ßç‡¶≤‡ßá‡¶Ø‡¶º‡¶æ‡¶∞", "‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´ ‡¶∞‡¶ø‡¶°‡¶æ‡¶∞", "‡¶ï‡ßã‡¶° ‡¶è‡¶°‡¶ø‡¶ü‡¶∞", "‡¶∏‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶°‡¶∂‡ßÄ‡¶ü ‡¶∏‡¶´‡¶ü‡¶ì‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶∞"], answer: "‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´ ‡¶∞‡¶ø‡¶°‡¶æ‡¶∞" },
          { question: "HTML ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá `<` ‡¶è‡¶¨‡¶Ç `>` ‡¶ö‡¶ø‡¶π‡ßç‡¶®‡¶ï‡ßá ‡¶ï‡ßÄ ‡¶¨‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º?", options: ["‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ô‡ßç‡¶ó‡ßá‡¶≤ ‡¶¨‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ü", "‡¶ï‡¶æ‡¶∞‡ßç‡¶≤‡¶ø ‡¶¨‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ü", "‡¶∏‡ßç‡¶ï‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ü", "‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶•‡ßá‡¶∏‡¶ø‡¶∏", "‡¶ï‡ßã‡¶ü‡ßá‡¶∂‡¶® ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï"], answer: "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ô‡ßç‡¶ó‡ßá‡¶≤ ‡¶¨‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ü" },
          { question: "‡¶ï‡ßã‡¶® HTML ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶≤‡¶æ‡¶á‡¶® ‡¶¨‡ßç‡¶∞‡ßá‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá?", options: ["<br>", "<lb>", "<break>", "<line>", "<newline>"], answer: "<br>" },
          { question: "‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶™‡ßá‡¶ú‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶ï‡ßã‡¶® ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶Ø‡¶º?", options: ["<link>", "<href>", "<a>", "<url>", "<navigate>"], answer: "<a>" },
          { question: "‡¶ï‡ßã‡¶®‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏?", options: ["‡¶Æ‡¶®‡¶ø‡¶ü‡¶∞", "‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü‡¶æ‡¶∞", "‡¶ï‡ßÄ‡¶¨‡ßã‡¶∞‡ßç‡¶°", "‡¶∏‡ßç‡¶™‡¶ø‡¶ï‡¶æ‡¶∞", "‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü‡¶∞"], answer: "‡¶ï‡ßÄ‡¶¨‡ßã‡¶∞‡ßç‡¶°" },
          { question: "‡¶ï‡¶Æ‡ßç‡¶™‡¶ø‡¶â‡¶ü‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶®‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡¶Ø‡¶º?", options: ["RAM", "CPU", "Hard Disk", "Cache", "Processor"], answer: "Hard Disk" },
          { question: "‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶™‡ßá‡¶ú‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶™‡¶æ‡¶∞‡ßç‡¶•‡¶ï‡ßç‡¶Ø ‡¶ï‡ßÄ?", options: ["‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü ‡¶è‡¶ï‡¶ü‡¶ø ‡¶è‡¶ï‡¶ï ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ, ‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶™‡ßá‡¶ú ‡¶Ö‡¶®‡ßá‡¶ï ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶∑‡ßç‡¶ü‡¶ø", "‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü ‡¶Ö‡¶®‡ßá‡¶ï ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶∑‡ßç‡¶ü‡¶ø, ‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶™‡ßá‡¶ú ‡¶è‡¶ï‡¶ü‡¶ø ‡¶è‡¶ï‡¶ï ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ", "‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡¶æ‡¶∞‡ßç‡¶•‡¶ï‡ßç‡¶Ø ‡¶®‡ßá‡¶á", "‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶õ‡¶¨‡¶ø‡¶§‡ßá ‡¶•‡¶æ‡¶ï‡ßá", "‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶™‡ßá‡¶ú ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü‡ßá ‡¶•‡¶æ‡¶ï‡ßá"], answer: "‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü ‡¶Ö‡¶®‡ßá‡¶ï ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶∑‡ßç‡¶ü‡¶ø, ‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶™‡ßá‡¶ú ‡¶è‡¶ï‡¶ü‡¶ø ‡¶è‡¶ï‡¶ï ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ" },
          { question: "‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶ø‡¶ï ‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶™‡ßá‡¶ú‡ßá‡¶∞ ‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø ‡¶ï‡ßÄ?", options: ["‡¶è‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü‡ßá‡¶∞ ‡¶â‡¶™‡¶∞ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶ï‡¶∞‡ßá ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§ ‡¶π‡¶Ø‡¶º", "‡¶è‡¶∞ ‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º‡¶¨‡¶∏‡ßç‡¶§‡ßÅ ‡¶∏‡¶¨‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶á ‡¶•‡¶æ‡¶ï‡ßá", "‡¶è‡¶ü‡¶ø ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶§‡¶•‡ßç‡¶Ø ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßá", "‡¶è‡¶ü‡¶ø ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶ø‡¶§ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶Ø‡¶º", "‡¶è‡¶ü‡¶ø ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞-‡¶∏‡¶æ‡¶á‡¶° ‡¶ï‡ßã‡¶° ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶Ø‡¶º"], answer: "‡¶è‡¶∞ ‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º‡¶¨‡¶∏‡ßç‡¶§‡ßÅ ‡¶∏‡¶¨‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶á ‡¶•‡¶æ‡¶ï‡ßá" },
          { question: "‡¶ï‡ßã‡¶®‡¶ü‡¶ø ‡¶´‡ßç‡¶∞‡¶®‡ßç‡¶ü-‡¶è‡¶®‡ßç‡¶° ‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶Ö‡¶Ç‡¶∂ ‡¶®‡¶Ø‡¶º?", options: ["HTML", "CSS", "JavaScript", "Python (‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞-‡¶∏‡¶æ‡¶á‡¶°)", "React"], answer: "Python (‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞-‡¶∏‡¶æ‡¶á‡¶°)" },
          { question: "VS Code ‡¶ï‡ßÄ?", options: ["‡¶è‡¶ï‡¶ü‡¶ø ‡¶ì‡¶Ø‡¶º‡ßá‡¶¨ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞", "‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡¶™‡¶æ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ", "‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡ßã‡¶° ‡¶è‡¶°‡¶ø‡¶ü‡¶∞", "‡¶è‡¶ï‡¶ü‡¶ø ‡¶ó‡ßá‡¶Æ", "‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü‡¶ø‡¶≠‡¶æ‡¶á‡¶∞‡¶æ‡¶∏"], answer: "‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡ßã‡¶° ‡¶è‡¶°‡¶ø‡¶ü‡¶∞" },
          { question: "CodePen ‡¶è‡¶∞ ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ ‡¶ï‡ßÄ?", options: ["‡¶Ö‡¶´‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá", "‡¶¨‡¶°‡¶º ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡ßá‡¶∞‡¶æ", "‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ ‡¶õ‡¶æ‡¶°‡¶º‡¶æ‡¶á ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶ï‡ßã‡¶° ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º", "‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶è‡¶®‡ßç‡¶° ‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø", "‡¶ñ‡ßÅ‡¶¨ ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßá"], answer: "‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ ‡¶õ‡¶æ‡¶°‡¶º‡¶æ‡¶á ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶ï‡ßã‡¶° ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º" }
      ];
      const SECRET_CODES = ["ALPCG-QUIZ-VX7B", "ALPCG-QUIZ-P9QW", "ALPCG-QUIZ-R4ZL", "ALPCG-QUIZ-M2FK", "ALPCG-QUIZ-T8JH"];

      // --- STATE ---
      let state = {
          screen: 'PIN', // PIN, REGISTER, QUIZ, RESULTS
          studentInfo: null,
          quizQuestions: [],
          score: 0,
          quizSessionId: '',
          isDarkMode: localStorage.getItem('dark-mode') === 'true',
          isTabSwitchModalOpen: false,
          pinError: false,
          registrationError: false,
          currentQuestionIndex: 0,
          selectedOption: null,
          shuffledOptions: [],
          feedback: null,
          timeLeft: TIME_LIMIT,
          timerId: null,
      };

      // --- DOM INIT ---
      const root = document.getElementById('root');
      
      // --- NOTIFICATION SERVICE (NETLIFY FORMS) ---
      const sendQuizNotification = async (params) => {
          const formData = new URLSearchParams();
          formData.append('form-name', 'quiz-notifications');
          formData.append('type', params.type);
          formData.append('name', params.studentInfo.name);
          formData.append('studentClass', params.studentInfo.class);
          formData.append('roll', params.studentInfo.roll);
          formData.append('score', String(params.score));
          formData.append('total', String(params.total));
          formData.append('sessionId', params.sessionId);
          formData.append('timestamp', new Date().toLocaleString('bn-BD'));

          try {
              await fetch('/', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                  body: formData.toString()
              });
          } catch (error) {
              console.error('Failed to send notification via Netlify Forms:', error);
          }
      };
      
      // --- LOGIC / HANDLERS ---
      const clearTimer = () => {
          if (state.timerId) {
              clearInterval(state.timerId);
              state.timerId = null;
          }
      };

      const handlePinSuccess = () => {
          state.screen = 'REGISTER';
          renderApp();
      };
      
      const handleRegistration = (info) => {
          state.studentInfo = info;
          state.quizQuestions = ALL_QUESTIONS.sort(() => 0.5 - Math.random()).slice(0, TOTAL_QUESTIONS_TO_SELECT);
          state.quizSessionId = crypto.randomUUID();
          state.screen = 'QUIZ';
          loadNextQuestion();
          sendQuizNotification({ type: 'started', studentInfo: info, score: 0, total: state.quizQuestions.length, sessionId: state.quizSessionId });
      };

      const handleQuizComplete = (finalScore) => {
          clearTimer();
          state.score = finalScore;
          state.screen = 'RESULTS';
          if (state.studentInfo && state.quizSessionId) {
               sendQuizNotification({ type: 'completed', studentInfo: state.studentInfo, score: finalScore, total: state.quizQuestions.length, sessionId: state.quizSessionId });
          }
          renderApp();
      };
      
      const handleRestart = () => {
          clearTimer();
          state = { ...state, screen: 'PIN', studentInfo: null, quizQuestions: [], score: 0, quizSessionId: '', isTabSwitchModalOpen: false, pinError: false, registrationError: false, currentQuestionIndex: 0, selectedOption: null, feedback: null };
          renderApp();
      };

      const loadNextQuestion = () => {
          clearTimer();
          if (state.currentQuestionIndex < state.quizQuestions.length) {
              const questionData = state.quizQuestions[state.currentQuestionIndex];
              state.selectedOption = null;
              state.feedback = null;
              state.shuffledOptions = [...questionData.options].sort(() => Math.random() - 0.5);
              state.timeLeft = TIME_LIMIT;
              renderApp();
              startTimer();
          } else {
              handleQuizComplete(state.score);
          }
      };

      const startTimer = () => {
          clearTimer();
          const timerDisplay = document.getElementById('timer-display');
          if (timerDisplay) timerDisplay.textContent = state.timeLeft;
          
          state.timerId = setInterval(() => {
              state.timeLeft--;
              const timerDisplay = document.getElementById('timer-display');
              if(timerDisplay) timerDisplay.textContent = state.timeLeft;
              
              if (state.timeLeft <= 0) {
                  clearTimer();
                  state.feedback = { message: `‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∂‡ßá‡¶∑! ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞: ${state.quizQuestions[state.currentQuestionIndex].answer}`, isCorrect: false };
                  renderApp();
                  setTimeout(() => {
                      state.currentQuestionIndex++;
                      loadNextQuestion();
                  }, 2000);
              }
          }, 1000);
      };

      // --- RENDER FUNCTIONS ---
      const renderHeader = () => `<header class="text-center mb-8 md:mb-12"><img src="https://picsum.photos/150/100" alt="ALPCG Logo" class="mx-auto mb-4" style="max-width: 150px; height: auto;" /><h1 class="text-4xl md:text-5xl font-bold text-[#025373] dark:text-[#F29E38]">‡¶ì‡ßü‡ßá‡¶¨ ‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡ßÅ‡¶á‡¶ú</h1><p class="text-xl mt-2 text-[#037E8C] dark:text-teal-400">‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡ßç‡¶û‡¶æ‡¶® ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡ßã ‡¶è‡¶¨‡¶Ç ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶ú‡ßá‡¶§‡ßã!</p></header>`;
      const renderFooter = () => `<footer class="text-center mt-16 pt-8 border-t border-gray-300 dark:border-gray-700"><p class="text-gray-600 dark:text-gray-400">‡¶ì‡¶Æ‡¶∞ ‡¶ï‡¶ø‡¶®‡ßç‡¶°‡¶æ‡¶∞‡¶ó‡¶æ‡¶∞‡ßç‡¶ü‡ßá‡¶® ‡¶∏‡ßç‡¶ï‡ßÅ‡¶≤ ‡¶è‡¶®‡ßç‡¶° ‡¶ì‡¶Æ‡¶∞¬†‡¶ó‡¶æ‡¶∞‡ßç‡¶ü‡ßá‡¶® ‡¶è‡¶ï‡¶æ‡¶°‡ßá‡¶Æ‡¶ø, ‡¶ú‡ßü‡¶™‡ßÅ‡¶∞‡¶π‡¶æ‡¶ü‡•§</p><p class="text-sm text-gray-500 dark:text-gray-500 mt-2">‡¶∏‡¶∞‡ßç‡¶¨‡¶∏‡ßç‡¶¨‡¶§‡ßç‡¶¨ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ¬© ‡ß®‡ß¶‡ß®‡ß´ | ALPCG | Fahad Bin Mamun</p></footer>`;
      const renderDarkModeToggle = () => `<button id="dark-mode-toggle" class="fixed top-4 right-4 z-50 bg-[#025373] text-white dark:bg-[#F29E38] dark:text-[#041B2D] px-4 py-2 rounded-lg shadow-md font-bold transition-colors duration-300">${state.isDarkMode ? '‡¶≤‡¶æ‡¶á‡¶ü ‡¶Æ‡ßã‡¶°' : '‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶Æ‡ßã‡¶°'}</button>`;
      const renderTabSwitchModal = () => `<div class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50"><div class="bg-white dark:bg-[#112A46] text-[#041B2D] dark:text-[#F8F4F0] p-8 rounded-2xl shadow-xl text-center max-w-sm w-11/12"><h3 class="text-2xl font-bold text-[#EF476F] mb-4">‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ!</h3><p class="text-lg mb-6">‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶ö‡¶≤‡¶æ‡¶ï‡¶æ‡¶≤‡ßÄ‡¶® ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡ßá ‡¶ö‡¶≤‡ßá ‡¶ó‡¶ø‡ßü‡ßá‡¶õ‡¶ø‡¶≤‡ßá‡•§ ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶¨‡ßá‡•§</p><button id="restart-btn" class="w-full p-3 font-bold text-white bg-[#F29E38] rounded-lg hover:bg-[#A66224] transition-colors duration-300">‡¶ï‡ßÅ‡¶á‡¶ú ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßã</button></div></div>`;
      
      const renderPinEntry = () => `<div class="bg-white dark:bg-[#112A46] rounded-2xl p-8 shadow-lg w-full max-w-md text-center"><h2 class="text-2xl font-bold mb-4 text-[#025373] dark:text-gray-200">‡¶ï‡ßÅ‡¶á‡¶ú‡ßá ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶ø‡¶® ‡¶¶‡¶æ‡¶ì</h2><input id="pin-input" type="password" value="" class="w-full p-3 mb-4 text-center text-lg bg-white dark:bg-[#2D4059] border-2 border-[#037E8C] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#F29E38]" placeholder="‡¶™‡¶ø‡¶® ‡¶ï‡ßã‡¶° ‡¶≤‡ßá‡¶ñ‡ßã" maxLength="4" /><button id="pin-submit-btn" class="w-full p-3 font-bold text-white bg-[#F29E38] rounded-lg hover:bg-[#A66224] transition-colors duration-300">‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡ßã</button>${state.pinError ? `<p class="mt-4 font-semibold text-red-500 dark:text-orange-400">‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶ø‡¶® ‡¶ï‡ßã‡¶°‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßã‡•§</p>` : ''}</div>`;
      const renderRegistration = () => `<div class="bg-white dark:bg-[#112A46] rounded-2xl p-8 shadow-lg w-full max-w-md text-center"><h2 class="text-2xl font-bold mb-4 text-[#025373] dark:text-gray-200">‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø</h2><div class="space-y-4"><input id="reg-name" type="text" value="" class="w-full p-3 text-center bg-white dark:bg-[#2D4059] border-2 border-[#037E8C] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#F29E38]" placeholder="‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡ßá‡¶ñ‡ßã" /><input id="reg-class" type="text" value="" class="w-full p-3 text-center bg-white dark:bg-[#2D4059] border-2 border-[#037E8C] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#F29E38]" placeholder="‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡¶ø ‡¶≤‡ßá‡¶ñ‡ßã" /><input id="reg-roll" type="text" value="" class="w-full p-3 text-center bg-white dark:bg-[#2D4059] border-2 border-[#037E8C] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#F29E38]" placeholder="‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶∞‡ßã‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶≤‡ßá‡¶ñ‡ßã" /></div><button id="reg-submit-btn" class="w-full p-3 mt-6 font-bold text-white bg-[#F29E38] rounded-lg hover:bg-[#A66224] transition-colors duration-300">‡¶ï‡ßÅ‡¶á‡¶ú ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßã</button>${state.registrationError ? `<p class="mt-4 font-semibold text-red-500 dark:text-orange-400">‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßã‡•§</p>` : ''}</div>`;
      
      const renderQuiz = () => {
        const currentQuestion = state.quizQuestions[state.currentQuestionIndex];
        if (!currentQuestion) return `<div class="text-center">‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>`;

        return `<div class="bg-white dark:bg-[#112A46] rounded-2xl p-8 shadow-lg w-full max-w-3xl"><div class="flex justify-between items-center mb-4"><p class="font-bold text-lg text-[#025373] dark:text-[#F29E38]">‡¶∏‡ßç‡¶ï‡ßã‡¶∞: ${state.score} / ${state.quizQuestions.length}</p><p class="font-semibold text-lg text-[#037E8C] dark:text-teal-400">‡¶∏‡¶Æ‡ßü ‡¶¨‡¶æ‡¶ï‡¶ø: <span id="timer-display">${state.timeLeft}</span> ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°</p><p class="font-semibold text-lg text-[#037E8C] dark:text-teal-400">‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ${state.currentQuestionIndex + 1}</p></div><h2 class="text-2xl font-bold mb-6 text-[#025373] dark:text-gray-200">${currentQuestion.question}</h2><div class="grid grid-cols-1 gap-3">${state.shuffledOptions.map(option => {
            const isSelected = state.selectedOption === option;
            const isCorrect = option === currentQuestion.answer;
            let buttonClass = 'option-btn w-full text-left p-3 font-bold rounded-lg border-2 transition-all duration-300 ';
            if (state.selectedOption === null) {
                buttonClass += 'bg-[#E6F3F2] dark:bg-[#2D4059] border-[#037E8C] hover:bg-[#037E8C] hover:text-white dark:hover:bg-teal-600';
            } else {
                buttonClass += 'cursor-not-allowed ';
                if ((isSelected && state.feedback?.isCorrect) || isCorrect) {
                    buttonClass += 'bg-[#06D6A0] border-[#06D6A0] text-white';
                } else if (isSelected && !state.feedback?.isCorrect) {
                    buttonClass += 'bg-[#EF476F] border-[#EF476F] text-white';
                } else {
                    buttonClass += 'bg-[#E6F3F2] dark:bg-[#2D4059] border-[#037E8C] opacity-70';
                }
            }
            return `<button data-option="${option}" class="${buttonClass}" ${state.selectedOption !== null ? 'disabled' : ''}>${option}</button>`;
        }).join('')}</div>${state.feedback ? `<p class="mt-4 text-center font-bold text-lg ${state.feedback.isCorrect ? 'text-green-500' : 'text-red-500'}">${state.feedback.message}</p>` : ''}</div>`;
      };
      
      const renderResults = () => {
          const { message, color, isPerfect, secretCode } = (() => {
              if (state.score === state.quizQuestions.length && state.quizQuestions.length > 0) return { message: "‡¶Ö‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£! ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶∏‡¶¨ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡¶ø‡ßü‡ßá‡¶õ‡ßã! üéâ", color: "text-[#06D6A0]", isPerfect: true, secretCode: SECRET_CODES[Math.floor(Math.random() * SECRET_CODES.length)] };
              if (state.score >= state.quizQuestions.length / 2) return { message: "‡¶ñ‡ßÅ‡¶¨ ‡¶≠‡¶æ‡¶≤‡ßã ‡¶ï‡¶∞‡ßá‡¶õ‡ßã! ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡ßç‡¶û‡¶æ‡¶® ‡¶™‡ßç‡¶∞‡¶∂‡¶Ç‡¶∏‡¶®‡ßÄ‡¶Ø‡¶º‡•§", color: "text-[#F29E38]", isPerfect: false, secretCode: null };
              return { message: "‡¶Ü‡¶∞‡¶ì ‡¶Ö‡¶®‡ßÅ‡¶∂‡ßÄ‡¶≤‡¶® ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡•§ ‡¶π‡¶æ‡¶≤ ‡¶õ‡ßá‡ßú‡ßã ‡¶®‡¶æ!", color: "text-[#EF476F]", isPerfect: false, secretCode: null };
          })();

          return `<div class="bg-white dark:bg-[#112A46] rounded-2xl p-8 shadow-lg w-full max-w-2xl text-center"><h2 class="text-3xl font-bold mb-6 text-[#025373] dark:text-gray-200">‡¶ï‡ßÅ‡¶á‡¶ú ‡¶∂‡ßá‡¶∑!</h2><p class="text-2xl font-bold mb-4 text-[#037E8C] dark:text-[#F29E38]">‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶´‡¶æ‡¶á‡¶®‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ï‡ßã‡¶∞: ${state.score} / ${state.quizQuestions.length}</p><p class="text-xl font-bold text-center mb-8 ${color} ${isPerfect ? "animate-pulse" : ""}">${message}</p>${isPerfect && secretCode ? `<div class="my-6"><div class="inline-block bg-yellow-300 dark:bg-[#F29E38] text-[#041B2D] dark:text-white px-6 py-3 rounded-lg font-bold text-xl shadow-md">${secretCode}</div><p class="text-sm mt-2 text-orange-800 dark:text-yellow-300">‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶¨‡ßÅ‡¶ù‡ßá ‡¶®‡¶ø‡¶§‡ßá ‡¶è‡¶á ‡¶ó‡ßã‡¶™‡¶® ‡¶ï‡ßã‡¶°‡¶ü‡¶ø ‡¶ï‡¶æ‡¶â‡¶ï‡ßá ‡¶¶‡¶ø‡¶ì ‡¶®‡¶æ!</p></div>` : ''}<button id="restart-btn" class="w-full max-w-xs mx-auto p-3 mt-4 font-bold text-white bg-[#F29E38] rounded-lg hover:bg-[#A66224] transition-colors duration-300">‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶¶‡¶æ‡¶ì</button></div>`;
      };

      const renderApp = () => {
          document.documentElement.classList.toggle('dark', state.isDarkMode);
          localStorage.setItem('dark-mode', state.isDarkMode);

          let screenHtml;
          switch (state.screen) {
              case 'PIN': screenHtml = renderPinEntry(); break;
              case 'REGISTER': screenHtml = renderRegistration(); break;
              case 'QUIZ': screenHtml = renderQuiz(); break;
              case 'RESULTS': screenHtml = renderResults(); break;
              default: screenHtml = renderPinEntry();
          }

          root.innerHTML = `<div class="bg-[#F8F4F0] dark:bg-[#041B2D] text-[#041B2D] dark:text-[#F8F4F0] min-h-screen transition-colors duration-300 antialiased">${renderDarkModeToggle()}<div class="container mx-auto p-4 md:p-8 flex flex-col min-h-screen">${renderHeader()}<main class="flex-grow flex items-center justify-center">${screenHtml}</main>${renderFooter()}</div>${state.isTabSwitchModalOpen ? renderTabSwitchModal() : ''}</div>`;
      };

      // --- EVENT LISTENERS ---
      root.addEventListener('click', e => {
          const target = e.target.closest('button');
          if (!target) return;

          switch (target.id) {
              case 'dark-mode-toggle':
                  state.isDarkMode = !state.isDarkMode;
                  renderApp();
                  break;
              case 'pin-submit-btn':
                  const pin = root.querySelector('#pin-input').value;
                  if (pin === CORRECT_PIN) {
                    state.pinError = false;
                    handlePinSuccess();
                  } else {
                    state.pinError = true;
                    root.querySelector('#pin-input').value = '';
                    renderApp();
                  }
                  break;
              case 'reg-submit-btn':
                  const name = root.querySelector('#reg-name').value;
                  const studentClass = root.querySelector('#reg-class').value;
                  const roll = root.querySelector('#reg-roll').value;
                  if (!name.trim() || !studentClass.trim() || !roll.trim()) {
                      state.registrationError = true;
                  } else {
                      state.registrationError = false;
                      handleRegistration({ name, class: studentClass, roll });
                  }
                  renderApp();
                  break;
              case 'restart-btn':
                  handleRestart();
                  break;
          }
          
          if (target.classList.contains('option-btn')) {
              if (state.selectedOption) return;
              clearTimer();
              const option = target.dataset.option;
              state.selectedOption = option;
              const isCorrect = option === state.quizQuestions[state.currentQuestionIndex].answer;
              if(isCorrect) {
                state.score++;
                state.feedback = { message: '‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞!', isCorrect: true };
              } else {
                state.feedback = { message: `‡¶≠‡ßÅ‡¶≤ ‡¶â‡¶§‡ßç‡¶§‡¶∞‡•§ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞: ${state.quizQuestions[state.currentQuestionIndex].answer}`, isCorrect: false };
              }
              renderApp();
              setTimeout(() => {
                  state.currentQuestionIndex++;
                  loadNextQuestion();
              }, 1500);
          }
      });
      
      root.addEventListener('keypress', e => {
        if (e.key === 'Enter' && state.screen === 'PIN') {
             root.querySelector('#pin-submit-btn')?.click();
        }
      });

      document.addEventListener('visibilitychange', () => {
          if (document.hidden && state.screen === 'QUIZ') {
              clearTimer();
              state.isTabSwitchModalOpen = true;
              renderApp();
          }
      });
      
      // --- INITIAL RENDER ---
      renderApp();

    </script>
  <script type="module" src="/index.tsx"></script>
</body>
</html>
